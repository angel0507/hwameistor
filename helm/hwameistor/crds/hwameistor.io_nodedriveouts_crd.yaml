apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: nodedriveouts.hwameistor.io
spec:
  group: hwameistor.io
  names:
    kind: NodeDriveout
    listKind: NodeDriveoutList
    plural: nodedriveouts
    shortNames:
    - lvmigrate
    singular: nodedriveout
  scope: Cluster
  versions:
    - additionalPrinterColumns:
        - description: Name of the volume to be migrated
          jsonPath: .spec.volumeName
          name: volume
          type: string
        - description: Node name of the volume replica to be migrated
          jsonPath: .spec.nodeName
          name: node
          type: string
        - description: Node name of the new volume replica
          jsonPath: .status.targetNodeName
          name: target
          type: string
        - description: State of the migration
          jsonPath: .status.state
          name: state
          type: string
        - jsonPath: .metadata.creationTimestamp
          name: age
          type: date
      name: v1alpha1
      schema:
        openAPIV3Schema:
          description: NodeDriveout is the Schema for the NodeDriveouts API
          properties:
            apiVersion:
              description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
              type: string
            kind:
              description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
              type: string
            metadata:
              type: object
            spec:
              description: NodeDriveoutSpec defines the desired state of NodeDriveout
              properties:
                nodeDriveoutStage:
                  description: Init StopSvc DriveOut StartSvc Completed
                  type: string
                nodeName:
                  description: NodeName nodeName of the driveout
                  type: string
              type: object
            status:
              description: NodeDriveoutStatus defines the observed state of NodeDriveout
              properties:
                driveoutStatus:
                  description: State of the operation, e.g. submitted, started, completed,
                    abort, ...
                  type: string
                driveoutVolumeNames:
                  description: DriveoutVolumeNames driveoutVolumeNames of the node driveout
                  items:
                    type: string
                  type: array
                message:
                  description: error message to describe some status
                  type: string
              type: object
          type: object
      served: true
      storage: true
      subresources:
        status: { }